var WasmLoader;if(function(e){function r(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(0===e.length)return".";for(var o,n=0;n<e.length;++n){var i=e[n];i.length>0&&(void 0===o?o=i:o+="/"+i)}return void 0===o?".":t(o)}function t(e){if(0===e.length)return".";var r=47===e.charCodeAt(0),t=47===e.charCodeAt(e.length-1);return e=o(e,!r),0!==e.length||r||(e="."),e.length>0&&t&&(e+="/"),r?"/"+e:e}function o(e,r){for(var t,o="",n=-1,i=0,a=0;a<=e.length;++a){if(a<e.length)t=e.charCodeAt(a);else{if(47===t)break;t=47}if(47===t){if(n===a-1||1===i);else if(n!==a-1&&2===i){if(o.length<2||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){for(var s=o.length-1,u=s;u>=0&&47!==o.charCodeAt(u);--u);if(u!==s){o=u===-1?"":o.slice(0,u),n=a,i=0;continue}}else if(2===o.length||1===o.length){o="",n=a,i=0;continue}r&&(o.length>0?o+="/..":o="..")}else o.length>0?o+="/"+e.slice(n+1,a):o=e.slice(n+1,a);n=a,i=0}else 46===t&&i!==-1?++i:i=-1}return o}function n(e){if(0===e.length)return".";for(var r=e.charCodeAt(0),t=47===r,o=-1,n=!0,i=e.length-1;i>=1;--i)if(r=e.charCodeAt(i),47===r){if(!n){o=i;break}}else n=!1;return o===-1?t?"/":".":t&&1===o?"//":e.slice(0,o)}var i;if("undefined"!=typeof TextDecoder){var a=new TextDecoder("utf-8");i=function(e){return a.decode(e)}}else i=function(e){for(var r,t,o,n="",i=e.byteLength,a=0;a<i;)switch(r=e[a++],r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(r);break;case 12:case 13:t=e[a++],n+=String.fromCharCode((31&r)<<6|63&t);break;case 14:t=e[a++],o=e[a++],n+=String.fromCharCode((15&r)<<12|(63&t)<<6|(63&o)<<0)}return n};var s=function(){function e(e,r){this.bodyLength=0,this.v=new Uint8Array(e),this.i=r}return e.FindSect=function(r,t){for(var o=new e(r,8),n=0,i=o.v.length;o.i<i;){if(n=o.ReadU32v(),n==t.length){for(var a=0;a!=n&&o.v[o.i++]==t[a++];);var s=a==n;if(n=o.ReadU32v(),s)return o.bodyLength=n,o}else o.i+=n,n=o.ReadU32v();o.i+=n}return null},e.prototype.SetOffs=function(e){this.i=e},e.prototype.Skip=function(e){var r=this.i+e;if(r>this.v.length)throw new Error("not enough data");this.i=r},e.prototype.ReadBuf=function(){return this.ReadBufOfLen(this.ReadU32v())},e.prototype.ReadUTF8Str=function(){return this.ReadUTF8StrOfLen(this.ReadU32v())},e.prototype.ReadBufOfLen=function(e){var r=this.i+e;if(r>this.v.length)throw new Error("not enough data");var t=this.v.subarray(this.i,r);return this.i+=e,t},e.prototype.ReadUTF8StrOfLen=function(e){var r=this.ReadBufOfLen(e),t=i(r);return t},e.prototype.ReadU32v=function(){var e=this.i,r=e+5;r>this.v.length&&(r=this.v.length);for(var t=0,o=0,n=0;this.i<r&&(n=this.v[this.i++],t|=(127&n)<<o,0!=(128&n));)o+=7;var i=this.i-e;if(this.i==r&&128&n)throw new Error("varint too large");if(0==i)throw new Error("varint of length 0");return t},e.SectIDType=Uint8Array.from([116,121,112,101]),e.SectIDImport=Uint8Array.from([105,109,112,111,114,116]),e}();!function(e){e[e.Wasm=0]="Wasm",e[e.JavaScript=1]="JavaScript"}(e.ModuleKind||(e.ModuleKind={}));var u=e.ModuleKind,f=function(){function e(e){this._modules=new Map,this.options="object"==typeof e?e:{}}return e.prototype.load=function(e,r){var t=this;return new Promise(function(o,n){e=t.normalizeRef(e,r);var i=t._modules.get(e);i?i.loading?i.loading.push({resolve:o,reject:n}):i.error?n(i.error):o(i):(t._modules.set(e,{loading:[{resolve:o,reject:n}]}),t.fetch(e,r).then(function(r){return t._load(r.buf,r.kind,e)}))})},e.prototype.loadBuf=function(e,r,t,o){var n=this;return new Promise(function(i,a){if(t=n.normalizeRef(t,o),n._modules.has(t))throw new Error('module "'+t+'" already registered');n._modules.set(t,{loading:[{resolve:i,reject:a}]}),n._load(e,r,t)})},e.prototype.defineAMD=function(e,r,t,o){var n,i,a,s,u=this;if("string"==typeof arguments[0]?(n=arguments[0],arguments[1]instanceof Array?(i=arguments[1],a=arguments[2],s=arguments[3]||null):(i=null,a=arguments[1],s=arguments[2]||null)):arguments[0]instanceof Array?(n=null,i=arguments[0],a=arguments[1],s=arguments[2]||null):(n=null,i=null,a=arguments[0],s=arguments[1]||null),!a)throw new Error("missing factory");return new Promise(function(e,r){var t={loading:[{resolve:e,reject:r}],exports:{}};if(n){if(n=u.normalizeRef(n,s),u._modules.has(n))throw new Error('module "'+n+'" already registered');t.id=n,u._modules.set(n,t)}if(!i){if("object"==typeof a)return t.loading=null,t.exports=a,e(t);i=["require","exports","module"]}if("function"!=typeof a)throw new Error("factory is not a function");var o=i.map(function(e){return"require"===e?Promise.resolve(function(e){var r=u._modules.get(u.normalizeRef(e,n));if(!r||!r.exports||r.loading)throw new Error("module not found");return r.exports}):"exports"===e?Promise.resolve(t.exports):"module"===e?Promise.resolve(t):u.resolveImport(e,[],n)});Promise.all(o).then(function(e){var r=a.apply(null,e);void 0!==r&&(t.exports=r),t.loading.forEach(function(e){return e.resolve(t)}),t.loading=null})})},e.prototype._load=function(e,r,t){var o=this,n=this._modules.get(t),i=function(e){o._modules.set(t,e),n.loading.forEach(function(r){return r.resolve(e)})},a=function(e){n.loading.forEach(function(r){return r.reject(e)}),n.loading=null,n.error=e};switch(r){case u.Wasm:this._loadWasm(e,t,n).then(i).catch(a);break;case u.JavaScript:throw new Error("ModuleKind.JavaScript not implemented");default:throw new Error("invalid module kind")}},e.prototype._loadWasm=function(e,r,t){try{Wasm.verifyModule(e)}catch(e){throw new Error("Invalid Wasm module: "+(e.message||String(e)))}var o=this.readWasmImports(e);return this.resolveImports(o,r).then(function(r){var t=Wasm.instantiateModule(e,r);return t.exports||(t={exports:{}}),t})},e.prototype.resolveImports=function(e,r){var t=this;return new Promise(function(o,n){var i={},a=1,s=function(){0===--a&&o(i)};e.forEach(function(e,o){++a,t.resolveImport(o,e,r).then(function(e){i[o]=e,s()}).catch(function(e){a=0,n(e)})}),s()})},e.prototype.resolveImport=function(e,r,t){return this.load(e,t).then(function(o){return r.forEach(function(r){if(!o.exports[r])throw new Error('no function "'+r+'" in module "'+e+'" imported by "'+t+'"')}),o.exports})},e.prototype.readWasmImports=function(e){var r=new Map,t=s.FindSect(e,s.SectIDImport);if(t)for(var o=t.ReadU32v(),n=0;n<o;++n){t.ReadU32v();var i=t.ReadUTF8Str(),a=t.ReadUTF8Str(),u=r.get(i);u||(u=[],r.set(i,u)),u.push(a)}return r},e.prototype.normalizeRef=function(e,t){return!t||"."!==e[0]||"/"!==e[1]&&"../"!==e.substr(0,3)||(e=r(n(t),e)),e},e.prototype.fetch=function(e,r){var t=e;return".wasm"!==t.substr(-5)&&(t+=".wasm"),fetch(new Request(t)).then(function(o){if(!o.ok){if(o.status>=400&&o.status<500){var n='unknown module "'+e+'"';throw r&&(n+=" imported by "+r),new Error(n)}throw new Error(t+" "+o.statusText)}return o.arrayBuffer().then(function(e){return{buf:e,kind:u.Wasm}})})},e}();e.Loader=f,f.prototype.defineAMD.amd={}}(WasmLoader||(WasmLoader={})),"undefined"!=typeof exports)if("object"==typeof module)module.exports=WasmLoader;else for(var k in WasmLoader)exports[k]=WasmLoader[k];else("undefined"!=typeof window?window:"undefined"==typeof global||global.process?this:global).WasmLoader=WasmLoader;
//# sourceMappingURL=wasm-loader.js.map